<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Triffidology Purple</title>
    <style>
        /* 1. Reset and Full Screen Layout */
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background-color: #000; overflow: hidden; 
            display: flex; align-items: center; justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* 2. Video Styling - Changed to 'contain' to prevent cropping */
        video { 
            width: 100vw; 
            height: 100vh; 
            object-fit: contain; /* Shows the whole video, no cropping */
            display: block; 
            background: #000; 
            outline: none;
        }

        /* 3. Loading Overlay */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 100;
            transition: opacity 0.8s ease;
        }

        #countdown {
            font-size: 5rem; font-weight: 800; color: #a855f7;
            text-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
            margin: 10px 0;
        }

        .loading-text { 
            font-size: 1rem; letter-spacing: 3px; 
            text-transform: uppercase; color: #fff; opacity: 0.8; 
        }

        /* 4. Start Button Styling - Rectangular with slightly rounded corners */
        #start-btn {
            display: none; 
            padding: 15px 40px; 
            background: #d1d5db; 
            color: #000000;      
            border: none; 
            border-radius: 8px;  
            font-weight: normal; 
            cursor: pointer; 
            font-size: 1.2rem; 
            text-transform: none; 
            letter-spacing: 1px; 
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease, background 0.3s ease;
        }

        #start-btn:active {
            transform: scale(0.95);
            background: #9ca3af;
        }

        /* 5. Progress Bar */
        #progress-container { 
            width: 200px; height: 4px; background: #222; 
            border-radius: 2px; margin-top: 20px; overflow: hidden; 
        }
        #progress-bar { 
            width: 0%; height: 100%; background: #a855f7; 
            box-shadow: 0 0 10px #a855f7; transition: width 1s linear; 
        }

        @supports (-webkit-touch-callout: none) {
            body { height: -webkit-fill-available; }
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="loading-text" id="status-msg">Initialising</div>
        <div id="countdown">10</div>
        
        <button id="start-btn">Start Animation</button>

        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <video id="myVideo" loop muted playsinline preload="auto">
        <source src="triffidology-purple.mp4" type="video/mp4">
    </video>

    <script>
        const video = document.getElementById('myVideo');
        const loader = document.getElementById('loader');
        const countdownEl = document.getElementById('countdown');
        const progressBar = document.getElementById('progress-bar');
        const statusMsg = document.getElementById('status-msg');
        const startBtn = document.getElementById('start-btn');

        let count = 10;
        const totalTime = 10;

        video.load();

        function goFullScreen() {
            const docElm = document.documentElement;
            if (docElm.requestFullscreen) {
                docElm.requestFullscreen();
            } else if (docElm.webkitRequestFullscreen) { 
                docElm.webkitRequestFullscreen(); 
            }
        }

        const timer = setInterval(() => {
            count--;
            let progress = ((totalTime - count) / totalTime) * 100;
            if(progressBar) progressBar.style.width = progress + "%";

            if (count > 0) {
                countdownEl.innerText = count;
            } else {
                clearInterval(timer);
                showStartButton();
            }
        }, 1000);

        function showStartButton() {
            statusMsg.style.display = "none";
            countdownEl.style.display = "none";
            document.getElementById('progress-container').style.display = "none";
            startBtn.style.display = "block";
        }

        startBtn.addEventListener('click', () => {
            goFullScreen();
            video.play();
            exitLoader();
        });

        function exitLoader() {
            loader.style.opacity = '0';
            setTimeout(() => { 
                loader.style.display = 'none'; 
            }, 800);
        }

        video.addEventListener('ended', () => { 
            video.play(); 
        });
    </script>
</body>
</html>
